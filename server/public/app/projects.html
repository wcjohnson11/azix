<div class="session ng-cloak">
<div class="row">
	<div class="col-md-4"><h1>Your Dashboard</h1></div>
	<div class="col-md-4 statsleft"><button ng-click="doRefresh()">Refresh Logs</button></div>
    <div class="col-md-4 statsright">
      <table>
      	<tr><td>Projects Complete: {{total - failed}}</td></tr>
      	<tr><td>Projects Failed: {{failed}}</td></tr>
      	<tr><td>Average Run Time: {{timeSum}}</td></tr>
      </table>
    </div>
</div>
<!-- create a filter outside of projects -->
<!-- <input name="name" filter="{ 'project': 'text' }"> -->

  <body ng-app="AccordionApp">

  <div ng-controller="AccordionCtrl" class="datum">

  <accordion close-others="oneAtATime">
    <accordion-group heading="Projects" is-open="status.isFirstOpen">
    <div class="clearfix"></div>
    <div loading-container="tableParams.settings().$loading">
    <table ng-table="tableParams" show-filter="true" class="table">
    <tr ng-repeat="project in projects">
        <td data-title="'Project Name'" filter="{ 'project': 'text' }" sortable="'project'">
            {{project.project}}
        </td>
        <td data-title="'Created at'" sortable="'createdAt'">
            {{project.createdAt | amDateFormat:' MMMM Do YYYY, h:mm:ss a'}}
        </td>
        <td data-title="'Completed at'" sortable="'completed'">
        	{{project.completed | amDateFormat:' MMMM Do YYYY, h:mm:ss a'}}
        </td>
        <td data-title="'Status'" sortable="'code'">
          <span ng-if="project.code === 0">Success</span>
          <span ng-if="project.code !== 0">Failed</span>
        </td>
    </tr>
</table>
</div>
      
    </accordion-group>
    <accordion-group heading="File Upload">
      <div class="row">
      	<div class="col-md-6 inputs">
      		<h3>Inputs</h3>
      		<div class="row">
      			<div flow-init="" flow-files-submitted="$flow.upload()" class="ng-scope">
              <div class="drop" flow-drop="" ng-class="dropClass">
                <span class="btn btn-default" flow-btn="">Upload File<input type="file" multiple="multiple" style="visibility: hidden; position: absolute;"></span>
                <span class="btn btn-default" flow-btn="" flow-directory="" ng-show="$flow.supportDirectory">Upload Folder<input type="file" multiple="multiple" webkitdirectory="webkitdirectory" style="visibility: hidden; position: absolute;"></span>
                <b>OR</b>
                Drag And Drop your file here
              </div>
            <br>
            <div class="well">
              <a class="btn btn-small btn-default" ng-click="$flow.resume()">Resume all</a>
              <a class="btn btn-small btn-default" ng-click="$flow.pause()">  Pause all</a>
              <a class="btn btn-small btn-default" ng-click="$flow.cancel()">  Cancel all</a>
              <span class="label label-info ng-binding">Total Size: 0bytes</span>
            </div>
        <!-- ngRepeat: file in $flow.files -->
            <tr ng-repeat="file in $flow.files">
                <td>{{$index+1}}</td>
                <td>{{name}}</td>
            </tr>
          </div>
      		</div>
        </div>

        <div class="col-md-6 scripts">
      	  <h3>Scripts</h3>
          <div class="row">
                      <div flow-init="" flow-files-submitted="$flow.upload()" class="ng-scope">
                        <div class="drop" flow-drop="" ng-class="dropClass">
                          <span class="btn btn-default" flow-btn="">Upload File<input type="file" multiple="multiple" style="visibility: hidden; position: absolute;"></span>
                          <span class="btn btn-default" flow-btn="" flow-directory="" ng-show="$flow.supportDirectory">Upload Folder<input type="file" multiple="multiple" webkitdirectory="webkitdirectory" style="visibility: hidden; position: absolute;"></span>
                          <b>OR</b>
                          Drag And Drop your file here
                        </div>
                      <br>
                      <div class="well">
                        <a class="btn btn-small btn-default" ng-click="$flow.resume()">Resume all</a>
                        <a class="btn btn-small btn-default" ng-click="$flow.pause()">  Pause all</a>
                        <a class="btn btn-small btn-default" ng-click="$flow.cancel()">  Cancel all</a>
                        <span class="label label-info ng-binding">Total Size: 0bytes</span>
                      </div>
                  <!-- ngRepeat: file in $flow.files -->
                      <tr ng-repeat="file in $flow.files">
                          <td>{{$index+1}}</td>
                          <td>{{file.name}}</td>
                      </tr>
                      </div>
                    </div>
                    </div>
        </div>
      </div>
    </accordion-group>
  </accordion>



</div>

